document.addEventListener('DOMContentLoaded', function() { const contactForm = document.getElementById('contactForm'); if (contactForm) { contactForm.addEventListener('submit', function(e) { e.preventDefault(); const formData = new FormData(contactForm); const data = { nome: formData.get('nome'), email: formData.get('email'), empresa: formData.get('empresa'), telefone: formData.get('telefone'), servico: formData.get('servico'), mensagem: formData.get('mensagem') }; if (!data.nome || !data.email || !data.mensagem) { showMessage('Por favor, preencha todos os campos obrigatórios.', 'error'); return; } const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; if (!emailRegex.test(data.email)) { showMessage('Por favor, insira um email válido.', 'error'); return; } const submitButton = contactForm.querySelector('button[type="submit"]'); const originalText = submitButton.innerHTML; submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando...'; submitButton.disabled = true; fetch('api/contact.php', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) }) .then(response => response.json()) .then(result => { if (result.success) { showMessage(result.message, 'success'); contactForm.reset(); } else { showMessage(result.message || 'Erro ao enviar mensagem.', 'error'); } submitButton.innerHTML = originalText; submitButton.disabled = false; }) .catch(error => { console.error('Error:', error); showMessage('Erro ao enviar mensagem. Por favor, tente novamente.', 'error'); submitButton.innerHTML = originalText; submitButton.disabled = false; }); }); } function showMessage(message, type) { const existingMessage = document.querySelector('.form-message'); if (existingMessage) { existingMessage.remove(); } const messageDiv = document.createElement('div'); messageDiv.className = `form-message ${type}`; messageDiv.innerHTML = ` <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i> ${message} `; contactForm.parentNode.insertBefore(messageDiv, contactForm); setTimeout(() => { if (messageDiv.parentNode) { messageDiv.remove(); } }, 5000); } const formInputs = document.querySelectorAll('.contact-form input, .contact-form select, .contact-form textarea'); formInputs.forEach(input => { input.addEventListener('focus', function() { this.parentElement.classList.add('focused'); }); input.addEventListener('blur', function() { if (!this.value) { this.parentElement.classList.remove('focused'); } }); if (input.value) { input.parentElement.classList.add('focused'); } }); });